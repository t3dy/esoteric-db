[
  {
    "id": "CHANGELOG.md",
    "title": "Version History",
    "content": "# Changelog: Esoteric Studies Database\n\n## [V8.0.0] - Reference-First Workbench (Current)\n**Focus**: Rigorous Digital Humanities, Data Provenance, Desire Gap Analytics.\n-   **Schema**: Added `reference_sources`, `reference_notes`, `evidence_spans` for academic citation.\n-   **UI**: Implemented \"Reference Portal\" with Dual-Mode (Bookshelf/Grid) interface.\n-   **Analytics**: \"Desire Gap\" metric (Scholar Interest vs. User Curiosity).\n-   **Pipeline**: Entity linking in `ingest_scholarly_data.py`.\n\n## [V7.0.0] - Digital Interactive Dictionary\n**Focus**: Lexicography, Definitions, Synonyms.\n-   **Schema**: `dictionary_entries`, `synonyms`, `images`.\n-   **Feature**: \"Dictionary Tab\" for lookup of alchemical terms.\n-   **Deprecated**: Replaced by V8's broader Reference Layer, but dictionary data preserved.\n\n## [V6.0.0] - Traditions & Lineages\n**Focus**: Historical context, Hermetic timelines.\n-   **Content**: \"Hermetic Lineage\" visualization.\n-   **Docs**: `mine_hermetic_lineages.py`.\n\n## [V5.0.0] - The Reflexive Scholar\n**Focus**: Chat integration, User Intent, \"Silent Enrichment\".\n-   **Feature**: \"Popularity Mode\" (Heatmaps of user interest).\n-   **Pipeline**: `ingest_chats.py` for analyzing user questions.\n\n## [V1.0.0 - V4.0.0] - Foundation\n**Focus**: PDF Text Mining, Keyword Search, Basic Entity Graph.\n-   Basic `scan.py` indexing.\n-   Initial `index.html` dashboard.\n"
  },
  {
    "id": "walkthrough_v8.md",
    "title": "User Guide (V8)",
    "content": "# V8: Reference-First Data Science Workbench\n\n**Objective**: This release transforms the Esoteric Studies Database into a rigorous Digital Humanities workbench, prioritizing **curated reference data** over raw text mining.\n\n## \ud83c\udfdb The New Architecture\n\nWe have moved from a flat \"entity graph\" to a **Three-Layer System**:\n\n1.  **Canonical Data**: The raw entities and documents (Materials, Symbols, Texts).\n2.  **Reference Layer**: A curated overlay of scholarly claims.\n    -   **Sources**: Bibliography (Obrist, Mah\u00e9, Abraham).\n    -   **Notes**: Specific claims (\"Obrist analyzes the visualization of the soul\").\n    -   **Evidence**: Direct text spans backing every note.\n3.  **Derived Analytics**: Pre-computed metrics for the dashboard.\n    -   **Desire Gap**: Measuring the distance between *User Curiosity* (Chat Questions) and *Scholar Interest* (Reference Notes).\n\n## \ud83d\udcda The Dual-Mode Library\n\nThe new **Reference Portal** (Tab 4) offers two ways to access the data:\n\n### 1. The Narrative Bookshelf (Story Mode)\nDesigned for exploration and establishing context.\n-   **Hermetic Lineage**: A chronological visualization of key texts from the *Corpus Hermeticum* to the Renaissance.\n-   **Alchemical Opus**: A thematic arrangement of materials and symbols.\n\n### 2. The Analytical Grid (Data Mode)\nDesigned for rigorous inquiry and \"Gap Hunting.\"\n-   **Sortable Metrics**: Filter by Scholar Interest or User Curiosity.\n-   **Desire Gap Heatmap**:\n    -   <span style=\"color:red\">**Red (+)**</span>: **High User Interest**, Low Scholar Coverage. (The \"Desire Gap\").\n    -   <span style=\"color:green\">**Green (-)**</span>: **High Scholar Coverage**, Low User Interest. (The \"Well-Trodden Path\").\n\n## \ud83d\udee0 Technical Details\n\n### New Tables\n-   `reference_sources`\n-   `reference_notes`\n-   `evidence_spans`\n-   `research_phases`\n\n### New Exporters (Zero-Join Front-end)\n-   `sources.json`\n-   `reference_notes.json`\n-   `image_links.json`\n-   `metrics.json`\n-   `graph.json`\n\n## \ud83d\ude80 How to Use\n1.  **Navigate to the \"Reference\" tab**.\n2.  **Toggle \"Grid Mode\"**.\n3.  **Sort by \"Desire Gap\" (Descending)**.\n4.  Identify topics where your curiosity outpaces your current reference material (Red rows).\n5.  **Click a row** to see the detailed Reference Notes and Evidence Spans (Coming in V8.1).\n"
  },
  {
    "id": "implementation_plan_v8.md",
    "title": "Architecture (V8)",
    "content": "# V8: Reference-First Data Science Workbench\n\n**Objective**: Re-architect the Esoteric Studies Database as a rigorous Digital Humanities workbench. This separates the system into three distinct layers: **Canonical Data** (Documents, Entities), **Derived Analytics** (notes, claims, metrics), and **Dashboard Projections** (UI).\n\n## 1. Schema Architecture (The Reference Layer)\n\nWe will introduce a normalized \"Reference Layer\" in `scan.py` to ground all analytics in evidence.\n\n### A. Reference Core\n```sql\nCREATE TABLE reference_sources (\n    id TEXT PRIMARY KEY,\n    short_name TEXT,            -- e.g. \"Obrist 2012\"\n    citation TEXT,              -- Full Chicago style citation\n    source_type TEXT,           -- \"Primary\", \"Secondary\", \"Tertiary\"\n    domain TEXT,                -- \"Alchemy\", \"Hermeticism\", \"Data Science\"\n    year INTEGER\n);\n\nCREATE TABLE reference_notes (\n    id TEXT PRIMARY KEY,\n    source_id TEXT,\n    subject_type TEXT,          -- \"entity\", \"image\", \"document\", \"edge\"\n    subject_id TEXT,            -- FK to entities.id, images.id, etc.\n    claim_text TEXT,            -- The analytic statement\n    stance TEXT,                -- \"Supports\", \"Refutes\", \"Mentions\", \"Analyzes\"\n    confidence FLOAT,           -- 0.0 to 1.0\n    page_ref TEXT,              -- \"p. 42\"\n    FOREIGN KEY(source_id) REFERENCES reference_sources(id)\n);\n\nCREATE TABLE evidence_spans (\n    note_id TEXT,\n    doc_id TEXT,\n    page_index INTEGER,\n    span_text TEXT,             -- The actual quote backing the note\n    FOREIGN KEY(note_id) REFERENCES reference_notes(id)\n);\n```\n\n### B. Research Process Modeling\n```sql\nCREATE TABLE research_phases (\n    id TEXT PRIMARY KEY,\n    label TEXT,                 -- e.g., \"The Nigredo Phase\"\n    opus_stage TEXT,            -- \"Nigredo\", \"Albedo\", etc.\n    start_date TEXT,\n    end_date TEXT,\n    notes TEXT\n);\n\n-- Update `chats` and `questions` to support Move Tracking\n-- ADD columns: move_type (Summarize, Critique...), opus_stage\n```\n\n## 2. Analytics Pipeline (The Derived Layer)\n\nWe will implement discrete exporters for pre-computed metrics to avoid client-side joins.\n\n### A. Desire Gap Metrics (`metrics.json`)\n-   **Scholar Interest**: Count of `reference_notes` linked to an Entity + Citation weighted count.\n-   **User Curiosity**: Count of `questions` linked to an Entity (weighted by `move_type`).\n-   **Gap Calculation**: `z(User) - z(Scholar)`.\n\n### B. Semantic Image-Text Correlation (`image_links.json`)\n-   STRICT linking only. No fuzzy matching.\n-   Join `image_entity_links` -> `entities` -> `reference_notes`.\n\n### C. Scholar Network Graph (`graph.json`)\n-   **Nodes**: Scholars, Works, Concepts.\n-   **Edges**: `analyzes`, `asserts`, `belongs_to`.\n-   **Key**: Every edge must have a `source_id` provenance.\n\n## 3. UI Implementation (The Projection Layer)\n\n-   **Reference Portal**: A new \"Reference\" tab that lists Sources and their Claims, not just a static glossary.\n-   **Image Inspector**: Inspecting an image shows specific, evidence-backed notes (not just random keywords).\n-   **Desire Gap Visualization**: A dedicated Heatmap view for \"Underexplored Topics.\"\n\n## 4. Execution Roadmap\n\n1.  **Schema Migration**: Update `scan.py` with new tables.\n2.  **Data Ingestion**: Update `ingest_scholarly_data.py` to populate `reference_sources` and `reference_notes` instead of flat tables.\n3.  **Chat Tagger**: Update `ingest_chats.py` to heuristically tag `move_type` and `opus_stage`.\n4.  **Export Pipeline**: Rewrite `export_json` to produce the decomposed JSON artifacts.\n5.  **UI Overhaul**: Rebuild `index.html` to consume these granular datasets.\n"
  },
  {
    "id": "ai_prompts.md",
    "title": "AI Persona Prompts",
    "content": "# AI Prompt: The \"Seed\" Project\n\nUse this prompt to generate the entire initial project foundation.\n\n---\n\n**Prompt:**\n\n> I need to build a **\"Seed\" implementation** for my Esoteric Studies Database.\n>\n> **Goal:** A local-first data pipeline that scans my PDF folders and generates a static, browsable dashboard on GitHub Pages.\n>\n> **Constraint:** It must be simple (one python script, one HTML page), BUT it must include the **database schema \"nubs\"** (empty tables) for future features so I don't have to rebuild the DB later.\n>\n> **1. The Database (SQLite):**\n> Write a python script `scan.py` that sets up a SQLite DB with this schema:\n> -   **Active Tables:**\n>     -   `documents` (id, hash, filename, path, size, created_at)\n>     -   `topics` (id, name - derived from parent folder)\n>     -   `document_topics` (link docs to topics)\n> -   **Stub Tables (The \"Nubs\" - Create these but leave empty):**\n>     -   `chunks` (doc_id, text, page)\n>     -   `entities` (id, name, type)\n>     -   `relationships` (source_id, target_id, type)\n>     -   `chats` (id, content, date)\n>\n> **2. The Ingestion Logic:**\n> In `scan.py`, implement a `scan_directory(root_path)` function that:\n> -   Walks the directory.\n> -   Calculates SHA256 (for the `hash` column) to identify unique files.\n> -   Inserts files into `documents`.\n> -   Creates `topics` based on the folder name and links them.\n> -   **Export:** At the end, dump the active data to `docs.json` (list of objects with file info and topic) and `stats.json` (counts per topic).\n>\n> **3. The Dashboard (Static HTML):**\n> Create an `index.html` file that:\n> -   Loads `docs.json` and `stats.json`.\n> -   Uses a simple library (like Alpine.js or vanilla JS) to render:\n>     -   **Tab 1: Library:** A simple HTML table of documents with a JavaScript search bar to filter by name.\n>     -   **Tab 2: Insights:** A simple Bar Chart (use Chart.js or just CSS bars) showing \"Documents per Topic\".\n>     -   **Tab 3: Knowledge Graph:** A tab that says \"Feature Coming Soon\" (this matches the empty `relationships` table).\n>\n> **Deliver:**\n> -   `scan.py`\n> -   `index.html`\n> -   `requirements.txt` (minimal)\n>\n> Keep the code clean, well-commented, and ready to run.\n"
  },
  {
    "id": "scholarly_compendium.md",
    "title": "Scholarly Source Text",
    "content": "# Scholarly Compendium: Alchemy & Hermeticism\n\n## 1. Alchemical Imagery (Obrist Analysis)\n### Les d\u00e9buts de l'imagerie alchimique (XIVe-XVe si\u00e8cles)\nBarbara Obrist analyzes the shift from textual instruction to visual symbolism in late medieval alchemy.\n\n**Key Texts Treated:**\n| Text | Date | Context |\n|------|------|---------|\n| *Das Buch der heiligen Dreifaltigkeit* | c. 1410\u20131419 | Imperial political prophecy and alchemical instruction. |\n| *Aurora consurgens* | Early 15th Century | Sapiential and erotic imagery applied to chemical processes. |\n| *Gratheus filius philosopher* | 14th Century | Heavily leans toward magical experimentation in the laboratory. |\n\n**Key Images Considered:**\n1. **The Solomonic Vessel**: An image of a sealed jar containing \"spirits.\" Obrist traces how the act of imprisoning spirits parallels the **fixation of volatile mercury**.\n2. **The King and Queen**: Symbolic representation of Sulfur (Male/Active) and Mercury (Female/Passive) in the \"Chemical Wedding.\"\n3. **The Dragon/Ouroboros**: Represents the circular nature of the opus and the dissolution of matter.\n\n---\n\n## 2. Alchemical Glossary & The Opus\n### The Four Classic Stages\n| Stage | Process | Symbolic Meaning |\n|-------|---------|------------------|\n| **Nigredo** | Putrefaction | Blackening, dissolution of the old state, \"death\" of the matter. |\n| **Albedo** | Purification | Whitening, washing away of impurities, spiritualization. |\n| **Citrinitas** | Awakening | Yellowing, the dawn of solar consciousness (often omitted in later schemes). |\n| **Rubedo** | Completion | Reddening, the final union and creation of the Philosopher's Stone. |\n\n### Core Terms\n- **Sulfur**: The \"Father,\" the hot, dry, active principle of combustion and form.\n- **Mercury**: The \"Mother,\" the cold, moist, passive principle of fluidity and spirit.\n- **Fixation**: The process of making a volatile substance (like Spirit) stable in a solid body.\n- **Volatilization**: The process of turning a solid body into a gaseous or spiritual state.\n\n---\n\n## 3. Hermeticism (Mah\u00e9 Analysis)\n### Th\u00e9orie et pratique dans l'Asclepius\nJean-Pierre Mah\u00e9 addresses the compositional unity of the *Asclepius* (IPM 40).\n\n**Overview:**\n- **Structure**: The volume tracks the diffusion of Hermetism across Late Antiquity, the Middle Ages, and the Renaissance.\n- **Central Argument**: Hermetism is not \"marginal occultism\" but a major intellectual current influencing Latin, Arabic, and Jewish cultures.\n- **Methodology**: Stresses the importance of manuscript census work (*Bibliotheca Hermetica*).\n\n**The Asclepius Dynamics:**\n- **Initiatory Dialogue**: Mah\u00e9 argues that the *Asclepius* is a structured progression from ritual context to philosophical instruction.\n- **Theory vs. Praxis**: The text balances ritual/theurgic elements (hymns, astrology) with philosophical cosmology (the dignity of the human mediator).\n- **Redactional Layers**: The Latin *Asclepius* is a complex adaptation of earlier Greek and Coptic (*Nag Hammadi NH VI*) materials.\n"
  }
]